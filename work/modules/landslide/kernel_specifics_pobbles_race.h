/**
 * @file kernel_specifics_pobbles_race.h
 * @brief #defines for the pobbles_race guest kernel (automatically generated)
 * @author Ben Blum <bblum@andrew.cmu.edu>
 */

#ifndef __LS_KERNEL_SPECIFICS_POBBLES_RACE_H
#define __LS_KERNEL_SPECIFICS_POBBLES_RACE_H

#include "x86.h"

#define GUEST_ESP0_ADDR (0x00100930 + 4)
#define GUEST_ESP0(cpu) READ_MEMORY(cpu, GUEST_ESP0_ADDR)
#define GUEST_TCB_STATE_FLAG_OFFSET 20

#define GUEST_TIMER_WRAP_ENTER     0x00103694
#define GUEST_TIMER_WRAP_EXIT      0x10369b
#define GUEST_CONTEXT_SWITCH_ENTER 0x00105adc
#define GUEST_CONTEXT_SWITCH_EXIT  0x105ba0

#define GUEST_READLINE_WINDOW_ENTER 0x00107036
#define GUEST_READLINE_WINDOW_EXIT 0x10727f

#define GUEST_LMM_ALLOC_ENTER      0x0010d2a4
#define GUEST_LMM_ALLOC_EXIT       0x10d55f
#define GUEST_LMM_ALLOC_SIZE_ARGNUM 2
#define GUEST_LMM_ALLOC_GEN_ENTER  0x00109a88
#define GUEST_LMM_ALLOC_GEN_EXIT   0x109e8f
#define GUEST_LMM_ALLOC_GEN_SIZE_ARGNUM 2
#define GUEST_LMM_FREE_ENTER       0x00109638
#define GUEST_LMM_FREE_EXIT        0x10992e
#define GUEST_LMM_FREE_BASE_ARGNUM 2
#define GUEST_LMM_FREE_SIZE_ARGNUM 3
#define GUEST_LMM_REMOVE_FREE_ENTER 0x00109940
#define GUEST_LMM_REMOVE_FREE_EXIT 0x109a85

#define GUEST_IMG_END 0x0015760c
#define GUEST_DATA_START 0x001341e0
#define GUEST_DATA_END 0x001352a0
#define GUEST_BSS_START 0x001352a0
#define GUEST_BSS_END GUEST_IMG_END
#define GUEST_PANIC 0x0010b4d4
#define GUEST_KERNEL_MAIN 0x00101160

#define TELL_LANDSLIDE_THREAD_SWITCH 0x0010863c
#define TELL_LANDSLIDE_SCHED_INIT_DONE 0x00108641
#define TELL_LANDSLIDE_FORKING 0x00108646
#define TELL_LANDSLIDE_VANISHING 0x0010864b
#define TELL_LANDSLIDE_SLEEPING 0x00108650
#define TELL_LANDSLIDE_THREAD_RUNNABLE 0x00108655
#define TELL_LANDSLIDE_THREAD_DESCHEDULING 0x0010865a
#define TELL_LANDSLIDE_MUTEX_LOCKING 0x0010865f
#define TELL_LANDSLIDE_MUTEX_BLOCKING 0x00108664
#define TELL_LANDSLIDE_MUTEX_LOCKING_DONE 0x00108669
#define TELL_LANDSLIDE_MUTEX_UNLOCKING 0x0010866e
#define TELL_LANDSLIDE_MUTEX_UNLOCKING_DONE 0x00108673

#define GUEST_SCHEDULER_FUNCTIONS { \
	{ 0x00105719, 0x10576b }, \
	{ 0x0010576c, 0x1057fa }, \
	{ 0x001057fb, 0x1059e0 }, \
	{ 0x001059e1, 0x105a0e }, \
	{ 0x00105a0f, 0x105a29 }, \
	{ 0x00105a2a, 0x105a46 }, \
	{ 0x00105a47, 0x105a6b }, \
	{ 0x00105a6c, 0x105adb }, \
	{ 0x00105adc, 0x105ba0 }, \
	{ 0x00106628, 0x106646 }, \
	{ 0x001035e6, 0x103690 }, \
	}
#define GUEST_SCHEDULER_GLOBALS { \
	{ 0x001375a8, 4 }, \
	{ 0x001575e0, 4 }, \
	{ 0x001352f4, 4 }, \
	{ 0x001364d4, 16 }, \
	{ 0x001375c0, 16 }, \
	{ 0x001575e4, 16 }, \
	}

#define GUEST_SCHEDULER_LOCK       0x001375a8
#define GUEST_MUTEX_LOCK 0x001069d8
#define GUEST_VANISH 0x001042c7
#define GUEST_VANISH_END 0x104647
#define GUEST_MUTEX_LOCK_MUTEX_ARGNUM 1
#define GUEST_MUTEX_IGNORES { \
	{ 0x001352dc, 8 }, \
	{ 0x001364c8, 8 }, \
	{ 0x001352cc, 8 }, \
	}

#endif

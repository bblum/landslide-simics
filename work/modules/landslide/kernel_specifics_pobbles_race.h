/**
 * @file kernel_specifics_pobbles_race.h
 * @brief #defines for the pobbles_race guest kernel (automatically generated)
 * @author Ben Blum <bblum@andrew.cmu.edu>
 */

#ifndef __LS_KERNEL_SPECIFICS_POBBLES_RACE_H
#define __LS_KERNEL_SPECIFICS_POBBLES_RACE_H

#define GUEST_CURRENT_TCB 0x00158400
#define GUEST_TCB_TID_OFFSET 0
#define TID_FROM_TCB(cpu, tcb) \
	SIM_read_phys_memory(cpu, tcb + GUEST_TCB_TID_OFFSET, WORD_SIZE)
#define GUEST_TCB_STACK_OFFSET 7
#define STACK_FROM_TCB(tcb) ((tcb)+(GUEST_TCB_STACK_OFFSET*WORD_SIZE))
#define GUEST_STACK_SIZE 4096

#define GUEST_PCB_PID_OFFSET 0
#define PID_FROM_PCB(cpu, pcb) \
	SIM_read_phys_memory(cpu, pcb + GUEST_PCB_PID_OFFSET, WORD_SIZE)
#define GUEST_RQ_ADDR 0x00158404

#define GUEST_Q_ADD                0x001056c9
#define GUEST_Q_ADD_Q_ARGNUM       1
#define GUEST_Q_ADD_TCB_ARGNUM     2
#define GUEST_Q_REMOVE             0x0010578b
#define GUEST_Q_REMOVE_Q_ARGNUM    1
#define GUEST_Q_REMOVE_TCB_ARGNUM  2
#define GUEST_Q_POP_RETURN         0x10578a
#define GUEST_Q_POP_Q_ARGNUM       1

#define GUEST_TIMER_WRAP_ENTER     0x001035bc
#define GUEST_TIMER_WRAP_EXIT      0x1035c3
#define GUEST_CONTEXT_SWITCH_ENTER 0x00105a60
#define GUEST_CONTEXT_SWITCH_EXIT  0x105b0d
#define GUEST_SCHED_INIT_EXIT      0x105495
#define GUEST_SCHEDULER_LOCK       0x001383c8
#define GUEST_SCHEDULER_LOCKED(x)  (x)

#define GUEST_FORK_WINDOW_ENTER    0x103ef6
#define GUEST_THRFORK_WINDOW_ENTER 0x1041f1
#define GUEST_SLEEP_WINDOW_ENTER   0x103fe8
#define GUEST_VANISH_WINDOW_ENTER  0x1045aa
#define GUEST_READLINE_WINDOW_ENTER 0x00106ff1
#define GUEST_READLINE_WINDOW_EXIT 0x10726d

#define GUEST_MUTEX_LOCK_ENTER   0x00106958
#define GUEST_MUTEX_LOCK_MUTEX_ARGNUM 1
#define GUEST_MUTEX_BLOCKED      0x10697f
#define GUEST_MUTEX_LOCK_EXIT    0x106995
#define GUEST_MUTEX_UNLOCK_ENTER 0x001069db
#define GUEST_MUTEX_UNLOCK_MUTEX_ARGNUM 1
#define GUEST_MUTEX_UNLOCK_EXIT  0x106a55

#define GUEST_LMM_ALLOC_ENTER      0x0010d10c
#define GUEST_LMM_ALLOC_EXIT       0x10d3b7
#define GUEST_LMM_ALLOC_SIZE_ARGNUM 2
#define GUEST_LMM_ALLOC_GEN_ENTER  0x00109938
#define GUEST_LMM_ALLOC_GEN_EXIT   0x109d26
#define GUEST_LMM_ALLOC_GEN_SIZE_ARGNUM 2
#define GUEST_LMM_FREE_ENTER       0x0010951c
#define GUEST_LMM_FREE_EXIT        0x1097ef
#define GUEST_LMM_FREE_BASE_ARGNUM 2
#define GUEST_LMM_FREE_SIZE_ARGNUM 3

#define GUEST_IMG_END 0x0015842c
#define GUEST_DATA_START 0x00135000
#define GUEST_DATA_END 0x001360c0
#define GUEST_BSS_START 0x001360c0
#define GUEST_BSS_END GUEST_IMG_END

#define GUEST_SCHEDULER_FUNCTIONS { \
	{ 0x001056c9, 0x10570a }, \
	{ 0x0010570b, 0x10578a }, \
	{ 0x0010578b, 0x10595e }, \
	{ 0x0010595f, 0x10598c }, \
	{ 0x0010598d, 0x1059a7 }, \
	{ 0x001059a8, 0x1059c4 }, \
	{ 0x001059c5, 0x1059e9 }, \
	{ 0x001059ea, 0x105a5f }, \
	{ 0x00105a60, 0x105b0d }, \
	{ 0x00106580, 0x10659e }, \
	{ 0x00103516, 0x1035b8 }, \
	}
#define GUEST_SCHEDULER_GLOBALS { \
	{ 0x001383c8, 4 }, \
	{ 0x00158400, 4 }, \
	{ 0x00136114, 4 }, \
	{ 0x001372f4, 16 }, \
	{ 0x001383e0, 16 }, \
	{ 0x00158404, 16 }, \
	}

#define GUEST_MUTEX_LOCK 0x00106958
#define GUEST_VANISH 0x00104223
#define GUEST_VANISH_END 0x1045bb

#endif

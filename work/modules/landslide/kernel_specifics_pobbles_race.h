/**
 * @file kernel_specifics_pobbles_race.h
 * @brief #defines for the pobbles_race guest kernel (automatically generated)
 * @author Ben Blum <bblum@andrew.cmu.edu>
 */

#ifndef __LS_KERNEL_SPECIFICS_POBBLES_RACE_H
#define __LS_KERNEL_SPECIFICS_POBBLES_RACE_H

#include "x86.h"

#define GUEST_ESP0_ADDR (0x00100930 + 4)
#define GET_ESP0(cpu) READ_MEMORY(cpu, GUEST_ESP0_ADDR)

#define GUEST_TIMER_WRAP_ENTER     0x001035d0
#define GUEST_TIMER_WRAP_EXIT      0x1035d7
#define GUEST_CONTEXT_SWITCH_ENTER 0x001059fc
#define GUEST_CONTEXT_SWITCH_EXIT  0x105ac0

#define GUEST_READLINE_WINDOW_ENTER 0x00106f76
#define GUEST_READLINE_WINDOW_EXIT 0x1071bf

#define GUEST_LMM_ALLOC_ENTER      0x0010d1ec
#define GUEST_LMM_ALLOC_EXIT       0x10d4a7
#define GUEST_LMM_ALLOC_SIZE_ARGNUM 2
#define GUEST_LMM_ALLOC_GEN_ENTER  0x001099d0
#define GUEST_LMM_ALLOC_GEN_EXIT   0x109dd7
#define GUEST_LMM_ALLOC_GEN_SIZE_ARGNUM 2
#define GUEST_LMM_FREE_ENTER       0x00109580
#define GUEST_LMM_FREE_EXIT        0x109876
#define GUEST_LMM_FREE_BASE_ARGNUM 2
#define GUEST_LMM_FREE_SIZE_ARGNUM 3
#define GUEST_LMM_REMOVE_FREE_ENTER 0x00109888
#define GUEST_LMM_REMOVE_FREE_EXIT 0x1099cd

#define GUEST_IMG_END 0x0015755c
#define GUEST_DATA_START 0x00134120
#define GUEST_DATA_END 0x001351e0
#define GUEST_BSS_START 0x001351e0
#define GUEST_BSS_END GUEST_IMG_END
#define GUEST_PANIC 0x0010b41c
#define GUEST_KERNEL_MAIN 0x00101158

#define TELL_LANDSLIDE_DECIDE 0x0010857c
#define TELL_LANDSLIDE_THREAD_SWITCH 0x00108581
#define TELL_LANDSLIDE_SCHED_INIT_DONE 0x00108586
#define TELL_LANDSLIDE_FORKING 0x0010858b
#define TELL_LANDSLIDE_VANISHING 0x00108590
#define TELL_LANDSLIDE_SLEEPING 0x00108595
#define TELL_LANDSLIDE_THREAD_RUNNABLE 0x0010859a
#define TELL_LANDSLIDE_THREAD_DESCHEDULING 0x0010859f
#define TELL_LANDSLIDE_MUTEX_LOCKING 0x001085a4
#define TELL_LANDSLIDE_MUTEX_BLOCKING 0x001085a9
#define TELL_LANDSLIDE_MUTEX_LOCKING_DONE 0x001085ae
#define TELL_LANDSLIDE_MUTEX_UNLOCKING 0x001085b3
#define TELL_LANDSLIDE_MUTEX_UNLOCKING_DONE 0x001085b8

#define GUEST_SCHEDULER_FUNCTIONS { \
	{ 0x00105639, 0x10568b },\
	{ 0x0010568c, 0x10571a },\
	{ 0x0010571b, 0x105900 },\
	{ 0x00105901, 0x10592e },\
	{ 0x0010592f, 0x105949 },\
	{ 0x0010594a, 0x105966 },\
	{ 0x00105967, 0x10598b },\
	{ 0x0010598c, 0x1059fb },\
	{ 0x001059fc, 0x105ac0 },\
	{ 0x00106548, 0x106566 },\
	{ 0x00103522, 0x1035cc }, }
#define GUEST_SCHEDULER_GLOBALS { \
	{ 0x001374e8, 4 }, \
	{ 0x00157528, 4 }, \
	{ 0x00135224, 4 }, \
	{ 0x00136414, 16 }, \
	{ 0x00137500, 16 }, \
	{ 0x0015752c, 16 }, \
	{ 0x0015753c, 8 }, \
	{ 0x00136408, 8 }, \
	{ 0x00157520, 8 },  }

#define GUEST_INIT_TID 1
#define GUEST_SHELL_TID 2
#define GUEST_FIRST_TID 1
#ifdef GUEST_IDLE_TID
#undef GUEST_IDLE_TID
#endif

#define GUEST_SCHEDULER_LOCK 0x001374e8
#define GUEST_WITHIN_FUNCTIONS { \
	{ 0x00104203, 0x104567 }, }
#define BUG_ON_THREADS_WEDGED 0
#define EXPLORE_BACKWARDS 1

#endif
